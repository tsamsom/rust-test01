name: awscurl

on:
  workflow_dispatch:

jobs:
  build:

    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read

    steps:
    - uses: actions/checkout@v4
    - name: Set up Python
      uses:  actions/setup-python@v5
    - name: Display Python Version
      run: python -c 'import sys; print(sys.version)'
    - name: Install awscurl
      run: python -m pip install awscurl
    - name: Configure AWS credentials
      uses: aws-actions/configure-aws-credentials@v2
      with:
        role-to-assume: arn:aws:iam::806877325588:role/silxapp-permissions
        aws-region: us-west-2             
    - name: Try awscurl
      run: ./doit
      